@using AllenKRyansCOSC481.Models;
@model IEnumerable<AllenKRyansCOSC481.Models.Item>
@{
    ViewBag.Title = "Cart";
}

<h2>Cart</h2>
<hr />
@{
    if (Session["cart"] == null)
    {
        <center><h3>Your cart is empty</h3></center>
    }
    else
    {
        double grandTotal = 0;
        List<CartItem> cart = (List<CartItem>)(Session["cart"]);
        foreach (var cartItem in cart)
        {

            <div style="width:100%; height: 110px">
                <div class="leftCart" style="float: left">
                    <h4>@cartItem.item.Name</h4>
                    <p>$ @cartItem.item.Price each</p>
                </div>
                <div class="rightCart" style="float:right">
                    <p><label>Amount: </label>@cartItem.count</p>
                    @using (Html.BeginForm("Remove", "OrderOnline", FormMethod.Post))
                    { 
                        <input type="number" name="amount" value="1" class="nmbrsz" min="1" max="@cartItem.count"  />
                        <br />
                        <input type="hidden" name="index" value="@cartItem.index" />
                        <input type="submit" name="remove" value="Remove"/>
                    }
                    
                    <br />
                    <label>$ @cartItem.price</label>
                </div>
            </div>
            <hr />
            grandTotal += cartItem.price;
        }
        <div>
            <p><label>Total: </label> $ @grandTotal</p>
            <button>Order Now!</button>
        </div>
    }
}
